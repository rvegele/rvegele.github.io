<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="noodl-app.png">
    <title>Noodl Viewer</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            user-select: none;
            background-color: black;
        }

        img {
            -webkit-user-drag: none;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: rgba(0,0,0,0);
            cursor: default;
        }

    </style>
</head>
<body>
<noscript>
    You need to enable JavaScript to run this app.
</noscript>

<div id="root" style="display: flex; width:100vw; height: 100vh; overflow: hidden"></div>

<script src="react.production.min.js"></script>
<script src="react-dom.production.min.js"></script>



<script type="application/javascript">
    window.__noodl_modules = [];
    window.Noodl = {
        defineModule:function(m) {
            window.__noodl_modules.push(m);
        }
    }
    window.projectData = {"settings":{},"components":[{"name":"/Main","nodes":[{"id":"eacc74e7-4dce-2baf-354b-8070e2b2b872","type":"Group","parameters":{"backgroundColor":"#FFFFFF"},"ports":[{"name":"width","type":{"name":"number","units":["%","px","vw"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Width","default":"100","index":2},{"name":"height","type":{"name":"number","units":["%","px","vh"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Height","default":"100","index":3},{"name":"borderWidth","type":{"name":"number","units":["px"],"defaultUnit":"px"},"plug":"input","group":"Style","displayName":"Border Width","default":0,"index":353},{"name":"borderColor","type":"color","plug":"input","group":"Style","displayName":"Border Color","index":354}],"children":[{"id":"d153fc31-3656-5032-7fda-cb0f5086f7e2","type":"Circle","parameters":{},"ports":[],"children":[]},{"id":"43c9eba5-c38d-8cbc-894e-c762f0efbc36","type":"Text","parameters":{"text":"createaudiosource"},"ports":[{"name":"width","type":{"name":"number","units":["%","px","vw"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Width","default":"100","index":2}],"children":[]},{"id":"ab01f0b1-5644-1794-8266-5ea503e02c98","type":"Group","parameters":{},"ports":[{"name":"width","type":{"name":"number","units":["%","px","vw"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Width","default":"100","index":2},{"name":"height","type":{"name":"number","units":["%","px","vh"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Height","default":"100","index":3},{"name":"borderWidth","type":{"name":"number","units":["px"],"defaultUnit":"px"},"plug":"input","group":"Style","displayName":"Border Width","default":0,"index":353},{"name":"borderColor","type":"color","plug":"input","group":"Style","displayName":"Border Color","index":354}],"children":[]},{"id":"b167e8e0-721d-2730-5d22-31eb5c0ae785","type":"Group","parameters":{},"ports":[{"name":"width","type":{"name":"number","units":["%","px","vw"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Width","default":"100","index":2},{"name":"height","type":{"name":"number","units":["%","px","vh"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Height","default":"100","index":3},{"name":"borderWidth","type":{"name":"number","units":["px"],"defaultUnit":"px"},"plug":"input","group":"Style","displayName":"Border Width","default":0,"index":353},{"name":"borderColor","type":"color","plug":"input","group":"Style","displayName":"Border Color","index":354}],"children":[{"id":"48afb5c6-1a88-b9aa-dd4e-15acdf5fa428","type":"Circle","parameters":{},"ports":[],"children":[]},{"id":"660fa850-7212-d34c-a170-28c01da3dab1","type":"Text","parameters":{"text":"set up streaming"},"ports":[{"name":"width","type":{"name":"number","units":["%","px","vw"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Width","default":"100","index":2}],"children":[]}]}]},{"id":"a77f3ffa-9cca-ee0b-66b0-64dd25c1fb9d","type":"REST","parameters":{"backendEndpoint":"https://api.wit.ai","resource":"/message"},"ports":[{"name":"backendEndpoint","plug":"input","type":{"name":"string"},"displayName":"Endpoint","group":"Backend","index":11},{"name":"code","displayName":"Script","group":"Request","plug":"input","type":{"name":"string","allowEditOnly":true,"codeeditor":"javascript"},"default":"define({\n\t// The input ports of the REST node, name of input and type\n\tinputs:{\n\t    //ExampleInput:'number',\n\t},\n\t\n\t// The output ports of the REST node, name of output and type\n\toutputs:{\n\t    //ExampleOutput:'string',\n\t},\n\t\n\t//Add custom code to setup the request object before the request\n\t//is made.\n\t//\n\t//*request.resource     contains the resource path of the request.\n\t//*request.method       contains the method, GET, POST, PUT or DELETE.\n\t//*request.headers      is a map where you can add additional headers.\n\t//*request.parameters   is a map the parameters that will be appended\n\t//                      to the url.\n\t//*request.content      contains the content of the request as a javascript\n\t//                      object.\n\t//\n\t// The inputs and outputs maps can also be accessed via *this.inputs and\n\t// *this.outputs.\n\trequest:function(inputs,request) {\n\t},\n\t\n\t// Add custom code to convert the response content to outputs\n\t//\n\t//*response.status    The status code of the response\n\t//*response.content   The content of the response as a javascript\n\t//                    object.\n\t//*response.request   The request object that resulted in the response.\n\t//\n\t// The inputs and outputs maps can also be accessed via *this.inputs and\n\t// *this.outputs.\n\tresponse:function(outputs,response) {\n\t}\n})\n","index":12}],"children":[]},{"id":"c8f14774-cdca-19b8-12f3-5e32da4b6c5e","type":"Javascript2","parameters":{"code":"function hasGetUserMedia() {\n    return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);\n}\n\t    \ndefine({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t   if (hasGetUserMedia()) {\n\t        console.log(\"good to go\");\n\t        } else {\n\t            alert('getUserMedia() is not supported by your browser');\n\t   }\n\t },\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n"},"ports":[{"name":"code","type":{"name":"string","allowEditOnly":true,"codeeditor":"javascript"},"plug":"input","group":"Code","displayName":"Code","default":"define({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t\t// ...\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n","index":1},{"name":"mySignal","plug":"input","type":{"name":"signal"},"group":"Inputs","index":2}],"children":[]},{"id":"4f4cf4f1-a6d3-b79e-4792-dbc9ae3f36a3","type":"Javascript2","parameters":{"code":"define({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    ExampleOutput:'*',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t    //console.log(this);\n\t    var self = this;\n\t    \n\t    const handleSuccess = function(stream) {\n\t        const context = new AudioContext();\n\t        const source = context.createMediaStreamSource(stream);\n\t        const processor = context.createScriptProcessor(1024, 1, 1);\n\t        \n\t        source.connect(processor);\n\t        processor.connect(context.destination);\n\t        \n\t        processor.onaudioprocess = function(e) {\n\t            // Do something with the data, e.g. convert it to WAV\n\t            //console.log(e.inputBuffer.length);\n\t            outputs.ExampleOutput = e.inputBuffer.length;\n\t            self.flagOutputDirty(\"ExampleOutput\");\n\t        };\n\t    };\n\t    \n\t    navigator.mediaDevices.getUserMedia({ audio: true, video: false }).then(handleSuccess);\n\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n"},"ports":[{"name":"code","type":{"name":"string","allowEditOnly":true,"codeeditor":"javascript"},"plug":"input","group":"Code","displayName":"Code","default":"define({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t\t// ...\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n","index":1},{"name":"mySignal","plug":"input","type":{"name":"signal"},"group":"Inputs","index":2},{"name":"ExampleOutput","type":{"name":"*"},"plug":"output","group":"Outputs","index":3}],"children":[]},{"id":"8f86e5c3-7ac8-2c54-9ab3-e514c8a6eaa0","type":"Javascript2","parameters":{"code":"define({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t    element: 'reference',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t    let x = ReactDOM.findDOMNode(inputs.element.reactComponentRef);\n\t    console.log(x);\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n"},"ports":[{"name":"code","type":{"name":"string","allowEditOnly":true,"codeeditor":"javascript"},"plug":"input","group":"Code","displayName":"Code","default":"define({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t\t// ...\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n","index":1},{"name":"mySignal","plug":"input","type":{"name":"signal"},"group":"Inputs","index":2},{"name":"element","plug":"input","type":{"name":"reference"},"group":"Inputs","index":3}],"children":[]},{"id":"c5569ef1-98c1-daff-36ac-f1da0a7c4236","type":"Circle","parameters":{},"ports":[],"children":[]},{"id":"ce653af6-ffdd-21ae-0595-e8dda6b33f74","type":"Group","parameters":{},"ports":[{"name":"width","type":{"name":"number","units":["%","px","vw"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Width","default":"100","index":2},{"name":"height","type":{"name":"number","units":["%","px","vh"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Height","default":"100","index":3},{"name":"borderWidth","type":{"name":"number","units":["px"],"defaultUnit":"px"},"plug":"input","group":"Style","displayName":"Border Width","default":0,"index":353},{"name":"borderColor","type":"color","plug":"input","group":"Style","displayName":"Border Color","index":354}],"children":[{"id":"455520e9-5a45-0db9-13a9-e6a7090ebbcb","type":"Text","parameters":{},"ports":[{"name":"width","type":{"name":"number","units":["%","px","vw"],"defaultUnit":"%"},"plug":"input","group":"Dimensions","displayName":"Width","default":"100","index":2}],"children":[]}]},{"id":"e49f01a5-f563-22c5-f9c0-59bf8b1ccd3d","type":"Javascript2","parameters":{"code":"\n// Put variables in global scope to make them available to the browser console.\nlet self = this;\n\ndefine({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t    audioRef: 'reference',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t    \n\t    //let node = ReactDOM.findDOMNode(inputs.audioRef.reactComponentRef);\n\t    //node.appendChild(document.createTextNode(\"Water\"));\n        \n        //let x = document.createElement(\"audio\");\n\t    \n\t    const audio = document.querySelector('audio');\n\t    //console.log(audio);\n\t    \n\t    const constraints = window.constraints = {\n\t        audio: true,\n\t        video: false\n        };\n\n\n\t\tfunction handleSuccess(stream) {\n\t\t    const audioTracks = stream.getAudioTracks();\n\t\t    \n\t\t    console.log(audioTracks);\n\t\t    console.log('Got stream with constraints:', constraints);\n\t\t    console.log('Using audio device: ' + audioTracks[0].label);\n\t\t    \n\t\t    stream.oninactive = function() {\n\t\t        console.log('Stream ended');\n\t\t    };\n\t\t    \n\t\t    window.stream = stream; // make variable available to browser console\n\t\t    audio.srcObject = stream;\n\t\t}\n\t\t\n\t\tfunction handleError(error) {\n\t\t    console.log('navigator.MediaDevices.getUserMedia error: ', error.message, error.name);\n\t\t}\n\t\t\n\t\tnavigator.mediaDevices.getUserMedia(constraints).then(handleSuccess).catch(handleError);\n\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n"},"ports":[{"name":"code","type":{"name":"string","allowEditOnly":true,"codeeditor":"javascript"},"plug":"input","group":"Code","displayName":"Code","default":"define({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t\t// ...\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n","index":1},{"name":"mySignal","plug":"input","type":{"name":"signal"},"group":"Inputs","index":2},{"name":"audioRef","plug":"input","type":{"name":"reference"},"group":"Inputs","index":3}],"children":[]},{"id":"f08811c7-95cb-5950-21fc-fecf85e0237f","type":"Javascript2","parameters":{"code":"define({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t\tlet x = document.createElement(\"audio\");\n\t\tdocument.body.appendChild(x);\n\t\t\n\t\tx.autoplay = true;\n\t\tx.controls = true;\n\t\t//var att = document.createAttribute(\"class\"); \n\t\t//x.setAttribute(\"autoplay\");\n\t\t //controls autoplay\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n"},"ports":[{"name":"code","type":{"name":"string","allowEditOnly":true,"codeeditor":"javascript"},"plug":"input","group":"Code","displayName":"Code","default":"define({\n\t// The input ports of the Javascript node, name of input and type\n\tinputs:{\n\t    // ExampleInput:'number',\n\t    // Available types are 'number', 'string', 'boolean', 'color' and 'signal',\n\t    mySignal:'signal',\n\t},\n\t\n\t// The output ports of the Javascript node, name of output and type\n\toutputs:{\n\t    // ExampleOutput:'string',\n\t},\n\t\n\t// All signal inputs need their own function with the corresponding name that\n\t// will be run when a signal is received on the input.\n\tmySignal:function(inputs,outputs) {\n\t\t// ...\n\t},\n\t\n\t// This function will be called when any of the inputs have changed\n\tchange:function(inputs,outputs) {\n\t\t// ...\n\t}\n})\n","index":1},{"name":"mySignal","plug":"input","type":{"name":"signal"},"group":"Inputs","index":2}],"children":[]}],"connections":[{"sourceId":"ce653af6-ffdd-21ae-0595-e8dda6b33f74","sourcePort":"this","targetId":"8f86e5c3-7ac8-2c54-9ab3-e514c8a6eaa0","targetPort":"element"},{"sourceId":"c5569ef1-98c1-daff-36ac-f1da0a7c4236","sourcePort":"onClick","targetId":"8f86e5c3-7ac8-2c54-9ab3-e514c8a6eaa0","targetPort":"mySignal"},{"sourceId":"48afb5c6-1a88-b9aa-dd4e-15acdf5fa428","sourcePort":"onClick","targetId":"e49f01a5-f563-22c5-f9c0-59bf8b1ccd3d","targetPort":"mySignal"},{"sourceId":"ab01f0b1-5644-1794-8266-5ea503e02c98","sourcePort":"this","targetId":"e49f01a5-f563-22c5-f9c0-59bf8b1ccd3d","targetPort":"audioRef"},{"sourceId":"d153fc31-3656-5032-7fda-cb0f5086f7e2","sourcePort":"onClick","targetId":"f08811c7-95cb-5950-21fc-fecf85e0237f","targetPort":"mySignal"}],"ports":[],"roots":["eacc74e7-4dce-2baf-354b-8070e2b2b872","c5569ef1-98c1-daff-36ac-f1da0a7c4236","ce653af6-ffdd-21ae-0595-e8dda6b33f74"]}],"rootComponent":"/Main","rootNode":"eacc74e7-4dce-2baf-354b-8070e2b2b872","metadata":{"deviceSettings":{"deviceTypes":[{"name":"Web","desc":"This is the default device that can be used to view the app from a browser.","rootComponentPath":"/Main","type":"Browser"}]}}};
</script>



<script src="noodl.js"></script>
</body>
</html>
